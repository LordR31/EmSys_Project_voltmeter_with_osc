{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Voltmeter &amp; Waveform Viewer Documentation Page","text":"<p>This page is dedicated to the Voltmeter &amp; Waveform Viewer Project developed as a final project my EmSys Course.</p>"},{"location":"#block-diagram","title":"Block Diagram","text":""},{"location":"#electrical-diagram","title":"Electrical Diagram","text":""},{"location":"adc/","title":"ADC","text":"<p>The Analog Digital Converter (ADC) used by the Jade M1 Board is a 10bit ADC. The ADC was used to develop the Voltmeter side of the board.</p> <p>The ADC was configured to run on channel 0, using AVCC as refference. The prescalar was set to 128 to align it's clock frequency with the recommended range of 50 - 200kHz. It was used with the polling method, not with interrupts.</p> <p></p>"},{"location":"board/","title":"Development Platform","text":"<p>The development platform used for this project is a GroundStudio Jade M1 Board, featuring an ATMega 2560. The Board runs at a frequency of 16MHz, but this is enough for this project.</p> <p>It offers generous resources for a embedded applications and for this project we made use of the ADC, SPI controller and many GPIO pins for buttons and display control.</p> Pin Function Description PD0 Cursor Left Moves the cursor to the previous recorded point PD1 Cursor Right Moves the cursor to the next recorded point PD2 Touch IRQ Pin used for Touchscreen ISR PD3 Voltage Toggle Toggles between High Voltage and Low Voltage PE3 Start Button Enables the ADC and starts the system PB4 Display DC Data/Control Pin for the display PB5 Display Reset Pin used for Display Reset PB6 Display CS Display Chip Select Pin used to signal SPI communication to the display PB7 Touchscreen CS Touchscreen Chip Select Pin used to signal SPI communication with the XPT2046 PF0 ADC Input Channel 0 for the board's ADC used as Voltmeter Input PB1 SPI SCK Clock Pin for SPI communication PB2 SPI MOSI MOSI Pin for SPI communication PB3 Touchscreen MISO MISO Pin used by XPT2046 <p></p>"},{"location":"buttons/","title":"Buttons","text":"<p>There are 4 physical buttons and 4 touchscreen buttons. In this section we are only talking about the physical buttons. The other 4 buttons will be discussed inside the Touchscreen section section of the documentation.</p> <p>All physical buttons are configured to work with interrupts in falling edge mode. As such, they are all connected to a GPIO pin and to the board's GND.</p> <p>The 4 physical buttons are:</p> <ul> <li>System Start</li> <li>Voltage Mode Toggle</li> <li>Cursor Left</li> <li>Cursor Right</li> </ul>"},{"location":"buttons/#system-start","title":"System Start","text":"<p>Connection: PE4 (Pin 2)</p> <p>This button is used to start and stop the ADC.</p>"},{"location":"buttons/#voltage-mode-toggle","title":"Voltage Mode Toggle","text":"<p>Connection: PD3 (Pin 18)</p> <p>As explained in the previous section, this button toggles the Voltmeter mode from High Voltage to Low Voltage and vice-versa</p>"},{"location":"buttons/#cursor-left","title":"Cursor Left","text":"<p>Connection: PD0 (Pin 21)</p> <p>When the Waveform Viewer is active and the cursor is turned on, this button moves the cursor to the previous recorded point.</p>"},{"location":"buttons/#cursor-left_1","title":"Cursor Left","text":"<p>Connection: PD1 (Pin 20)</p> <p>When the Waveform Viewer is active and the cursor is turned on, this button moves the cursor to the next recorded point. </p>"},{"location":"display/","title":"Display","text":"<p>The display used in this project uses an ILI9341 controller and an XPT2046 for resistive touchscreen. It communicates with the board over SPI and it has a resolution of 340x240.</p> <p>In the following image we can see the UI defined for this project and the Waveform Viewer in line mode.</p> <p></p>"},{"location":"display/#the-defined-ui","title":"The defined UI","text":"<p>On the top, left side of the UI is the Voltmeter area. When the cursor is turned on, the voltmeter measurement gets pushed slightly upward to make space for the cursor measurement. On the right side, also on top, we can have the area which specifies the Voltage Type (H or L) and the indicator \"LEDs\" which tell, in a visual manner, the amount of voltage measured. One LED turns on every 2.4V. The last LED is red, to signal maximum voltage, while the previous 3 LEDs are orange, to signal we are close to the maximum voltage.</p> <p>On the right side we have the touch buttons, while in the middle, we have the Waveform Viewer area. When the Waveform Viewer is turned off, most of the space is taken by the measurements for the maximum and minimum value for the recorded points.</p> <p>When the Waveform Viewer is turned on, two horizontal lines appear on the screen to mark the limits of the Waveform Viewer, on top and bottom. The measurements for the minimum and maximum value get moved to their respective line and the text gets scaled down. They are now used as the upper and lower range for the Waveform Viewer, which has auto-scaling.</p>"},{"location":"display/#touchscreen-buttons","title":"Touchscreen Buttons","text":"<p>The button menu on the right side contains the following buttons:</p> <ul> <li>Cursor</li> <li>Hold</li> <li>Wave</li> <li>Toggle</li> </ul>"},{"location":"display/#cursor","title":"Cursor","text":"<p>The cursor button enables and disables the cursor. The cursor is a vertical line which can be moved to the left or to the right of the screen using the designated physical buttons, always ending up on a recorded point. It is used to see the voltage of the selected point inside the voltmeter area.</p> <p>When pressed while the Waveform Viewer is turned off, a warning message appears, informing the user that the cursor cannot be used without that feature.</p>"},{"location":"display/#hold","title":"Hold","text":"<p>The hold button halts voltage recording, making the Waveform Viewer keep the current form. This feature is useful when paired with the cursor, to check up on signal variations.</p>"},{"location":"display/#wave","title":"Wave","text":"<p>The wave button enables or disables the Waveform Viewer. The Waveform Viewer enables the user to see the form of the signal, up to 25 previous points. This feature is useful for detecting changes in signal strenght and, as stated before, it works best when paired with the cursor and the hold feature.</p>"},{"location":"display/#toggle","title":"Toggle","text":"<p>The toggle button is used to toggle between the two modes for the Waveform Viewer. Similar to the cursor button, when pressed while the Waveform Viewer is turned off, a warning message appears, informing the user that the toggle button cannot be used without that feature.</p>"},{"location":"voltmeter/","title":"Voltmeter","text":"<p>The voltmeter part of the project, as stated in the previous section, was developed using the board's 10bit ADC. It has two operation modes which can be toggled using one of the buttons:</p> <ul> <li>High Voltage (0 - 24V Range)</li> <li>Low Voltage (0-5V Range)</li> </ul> <p>Since the board's ADC can only safely accept signal up to 5V, a voltage divider was used, to bring the 24V from the 24V power supply down to the safe range. As such, measurements in High Voltage mode are not as accurate as the ones in Low Voltage mode. The error is within 14mV, so the Voltmeter is usable, but not for works where error needs to be under 1%.</p> <p>In the electrical diagram we can see the circuit used for the Voltmeter measurement. A voltage divider consisting of two 4.7k resistors and one 2.2k resistor were used to scale down the 24V down to the safe 5V range. Two 1N5817 diodes were used to protect the board on the 5V and GND terminals. To further simulate different voltage levels, the ADC Input also goes through a B1K potentimeter.</p> <p>As stated, the toggle between High Voltage and Low Voltage is done by using a button, but the 24V Power Supply should also be disconnected, though it is not necessary, as the voltage is already scaled to the low voltage range.</p>"}]}